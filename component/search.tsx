'use client'
import Image from 'next/image'
import styles from './search.module.css'
import { useEffect, useRef, useState } from "react";


export default function Search() {
  let steps = 0;
  const searchValue = "Who is Sikand Sandhu?";
  const [searchOnType,setSearchOnType] = useState("");
  const cursorRef = useRef<HTMLDivElement>(null);
  const [cursorMove,setCursorMove] = useState(false);

  useEffect(()=> {
    console.log(cursorMove);
    console.log(cursorRef);
    
    if(cursorMove == true && cursorRef != null) {
        const interval = setInterval(function () {
            console.log("hello");
            steps+=1;
            console.log(steps);
            
            if(cursorRef.current!.offsetTop >= 605  && cursorRef.current!.offsetLeft >= 370){
                clearInterval(interval)
            }
            console.log(cursorRef.current!.offsetTop);
            if(cursorRef.current!.offsetTop <= 302){
                cursorRef.current!.style.top = cursorRef.current!.offsetTop + 1 + "px";
            }
            if(cursorRef.current!.offsetLeft <= 370){
                cursorRef.current!.style.left = cursorRef.current!.offsetLeft + 1 + "px";
            }
            
        },10)
        
    }
  },[cursorMove])

  const handleKeyCaputure = (e : any) => {    
   if(e.code =="Backspace") {
    if( searchOnType.length != 0){
        setSearchOnType(searchOnType.slice(0,searchOnType.length-1))
    }
   }else if(searchOnType == searchValue){
    setCursorMove(true);
        return;
   }else {
    setSearchOnType(searchOnType + searchValue[searchOnType.length]);
   }
  }

  return (
    <>
    <div className={styles['search-container']}>
        <div className={styles['search-bar'] + " " + (searchOnType.length != 0 ? styles["search-active"] : "")}>
          <div className={styles['search-border']}>
              <span  className={"material-symbols-outlined" + " " + styles["sign-color"]}>search</span>
            <textarea spellCheck={false} value={searchOnType} onKeyDownCapture={handleKeyCaputure} className={styles['search-area']}></textarea>
            <div className={styles["search-option-cover"]}>
            <div className={"clickable" + " " + styles["svg-container"]} >
              {searchOnType.length != 0 && <><span title='Clear' className={"material-symbols-outlined" + " " + styles["sign-color"] + " " + styles["sign-beautify"]} onClick={()=> {setSearchOnType("")}}>close</span>
              <span className={styles["search-seperater"]}></span></>}
              <div className={styles['svg-title']} title='Go Straight to CV'>
              <svg  className={styles['svg-align']} xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="none" viewBox="0 0 400 345">
                <g clip-path="url(#a)">
                  <path fill="#fff" d="M0 0h400v345H0z"/>
                  <path fill="#fff" d="M-64-22h477v390H-64z"/>
                  <path fill="#EA4335" d="M181.79 144h-23.779c-1.406-6.839-3.867-12.848-7.382-18.026-3.452-5.177-7.671-9.524-12.657-13.039-4.922-3.58-10.387-6.265-16.395-8.054-6.009-1.79-12.273-2.685-18.793-2.685-11.89 0-22.66 3.004-32.312 9.013-9.588 6.008-17.226 14.861-22.915 26.559-5.625 11.697-8.438 26.047-8.438 43.05 0 17.003 2.813 31.353 8.438 43.051 5.689 11.697 13.327 20.55 22.915 26.559 9.652 6.008 20.423 9.012 32.312 9.012 6.52 0 12.784-.895 18.793-2.684 6.008-1.79 11.473-4.443 16.395-7.958 4.986-3.58 9.205-7.959 12.657-13.136 3.515-5.242 5.976-11.25 7.382-18.026h23.779c-1.79 10.036-5.05 19.017-9.78 26.943-4.73 7.926-10.611 14.67-17.642 20.231-7.031 5.497-14.926 9.684-23.683 12.56-8.693 2.876-17.993 4.315-27.901 4.315-16.747 0-31.64-4.091-44.68-12.273-13.04-8.182-23.3-19.815-30.778-34.901-7.479-15.085-11.218-32.983-11.218-53.693s3.74-38.608 11.218-53.693c7.479-15.085 17.738-26.719 30.778-34.9 13.04-8.182 27.933-12.273 44.68-12.273 9.908 0 19.208 1.438 27.901 4.314 8.757 2.877 16.652 7.096 23.683 12.657 7.031 5.497 12.912 12.208 17.642 20.135 4.73 7.862 7.99 16.843 9.78 26.942Z"/>
                  <path fill="#EA4335" d="M181.79 144v5h5.964l-1.041-5.872-4.923.872Zm-23.779 0-4.897 1.007.821 3.993h4.076v-5Zm-7.382-18.026-4.161 2.774.012.018.012.017 4.137-2.809Zm-12.657-13.039-2.941 4.043.03.022.03.021 2.881-4.086Zm-16.395-8.054-1.428 4.792 1.428-4.792Zm-51.105 6.328-2.642-4.245-.006.004-.007.004 2.655 4.237Zm-22.915 26.559-4.497-2.187-.005.01-.004.01 4.506 2.167Zm0 86.101-4.506 2.166.005.01.004.01 4.497-2.186Zm22.915 26.559-2.655 4.236.007.004.006.004 2.642-4.244Zm51.105 6.328-1.428-4.792 1.428 4.792Zm16.395-7.958 2.907 4.068.009-.007-2.916-4.061Zm12.657-13.136-4.153-2.785-.008.011 4.161 2.774Zm7.382-18.026v-5h-4.068l-.827 3.984 4.895 1.016Zm23.779 0 4.922.878 1.048-5.878h-5.97v5Zm-9.78 26.943-4.294-2.562 4.294 2.562Zm-17.642 20.231 3.08 3.939.011-.009.011-.009-3.102-3.921Zm-23.683 12.56-1.56-4.75-.01.003 1.57 4.747Zm-72.581-7.958-2.658 4.235 2.658-4.235Zm-30.778-34.901 4.48-2.221-4.48 2.221ZM130.685 84.266l-1.57 4.747.01.004 1.56-4.75Zm23.683 12.657-3.102 3.921.011.009.011.009 3.08-3.94Zm17.642 20.135-4.294 2.562.005.007.005.008 4.284-2.577ZM181.79 139h-23.779v10h23.779v-10Zm-18.881 3.993c-1.524-7.41-4.218-14.045-8.144-19.827l-8.273 5.617c3.105 4.573 5.333 9.955 6.622 16.224l9.795-2.014Zm-8.12-19.792c-3.787-5.68-8.436-10.475-13.935-14.353l-5.763 8.173c4.472 3.153 8.26 7.052 11.377 11.727l8.321-5.547Zm-13.876-14.31c-5.394-3.923-11.374-6.856-17.909-8.802l-2.855 9.584c5.482 1.633 10.433 4.069 14.882 7.305l5.882-8.087Zm-17.909-8.802c-6.49-1.933-13.236-2.893-20.22-2.893v10c6.056 0 11.838.83 17.365 2.477l2.855-9.584Zm-20.22-2.893c-12.778 0-24.472 3.243-34.954 9.768l5.285 8.49c8.822-5.492 18.67-8.258 29.669-8.258v-10Zm-34.967 9.776c-10.495 6.577-18.72 16.198-24.757 28.609l8.993 4.374c5.342-10.984 12.393-19.069 21.074-24.509l-5.31-8.474Zm-24.766 28.629c-6.035 12.549-8.932 27.687-8.932 45.217h10c0-16.476 2.728-30.038 7.944-40.883l-9.012-4.334Zm-8.932 45.217c0 17.53 2.897 32.668 8.932 45.217l9.012-4.333c-5.216-10.846-7.944-24.408-7.944-40.884h-10Zm8.941 45.237c6.036 12.411 14.262 22.033 24.757 28.609l5.31-8.473c-8.68-5.441-15.732-13.525-21.074-24.509l-8.993 4.373Zm24.77 28.617c10.482 6.526 22.176 9.768 34.954 9.768v-10c-11 0-20.847-2.765-29.67-8.257l-5.284 8.489Zm34.954 9.768c6.984 0 13.73-.959 20.22-2.892l-2.855-9.584c-5.527 1.646-11.309 2.476-17.365 2.476v10Zm20.22-2.892c6.519-1.942 12.487-4.833 17.875-8.682l-5.813-8.137c-4.456 3.183-9.418 5.597-14.917 7.235l2.855 9.584Zm17.884-8.689c5.482-3.935 10.12-8.752 13.901-14.424l-8.321-5.547c-3.122 4.684-6.922 8.624-11.412 11.848l5.832 8.123Zm13.893-14.412c3.909-5.827 6.601-12.448 8.126-19.795l-9.791-2.032c-1.288 6.205-3.517 11.601-6.64 16.257l8.305 5.57Zm3.23-15.811h23.779v-10h-23.779v10Zm18.856-5.878c-1.694 9.503-4.761 17.903-9.151 25.259l8.588 5.124c5.07-8.496 8.523-18.058 10.408-28.627l-9.845-1.756Zm-9.151 25.259c-4.428 7.42-9.909 13.698-16.45 18.871l6.204 7.843c7.522-5.949 13.801-13.158 18.834-21.59l-8.588-5.124Zm-16.428 18.854c-6.56 5.129-13.937 9.047-22.163 11.749l3.121 9.5c9.288-3.051 17.7-7.506 25.202-13.371l-6.16-7.878Zm-22.173 11.752c-8.147 2.696-16.913 4.062-26.331 4.062v10c10.398 0 20.232-1.511 29.472-4.568l-3.141-9.494Zm-26.331 4.062c-15.893 0-29.85-3.87-42.023-11.508l-5.315 8.47c13.906 8.725 29.737 13.038 47.338 13.038v-10Zm-42.023-11.508c-12.186-7.646-21.847-18.548-28.955-32.887l-8.96 4.442c7.85 15.832 18.706 28.197 32.6 36.915l5.315-8.47ZM31.806 232.29c-7.067-14.254-10.698-31.358-10.698-51.472h-10c0 21.307 3.848 39.998 11.738 55.914l8.96-4.442Zm-10.698-51.472c0-20.114 3.63-37.218 10.698-51.472l-8.96-4.442c-7.89 15.916-11.738 34.607-11.738 55.914h10Zm10.698-51.472c7.108-14.339 16.77-25.24 28.955-32.886l-5.315-8.47c-13.894 8.717-24.75 21.082-32.6 36.914l8.96 4.442ZM60.76 96.46c12.174-7.639 26.13-11.508 42.023-11.508v-10c-17.601 0-33.432 4.312-47.338 13.037l5.315 8.47Zm42.023-11.508c9.418 0 18.184 1.366 26.331 4.061l3.141-9.494c-9.24-3.057-19.074-4.567-29.472-4.567v10Zm26.341 4.065c8.215 2.698 15.584 6.641 22.141 11.827l6.204-7.843c-7.506-5.936-15.925-10.43-25.224-13.485l-3.121 9.5Zm22.163 11.845c6.529 5.104 12.004 11.343 16.428 18.758l8.588-5.125c-5.036-8.437-11.322-15.621-18.856-21.511l-6.16 7.878Zm16.438 18.773c4.379 7.28 7.445 15.67 9.14 25.237l9.847-1.744c-1.884-10.632-5.338-20.203-10.419-28.648l-8.568 5.155Z"/>
                  <path fill="#FBBC05" d="m242.832 82.636 58.296 165.299h2.301l58.295-165.299h24.929L314.551 279h-24.545L217.903 82.636h24.929Z"/>
                  <path fill="#FBBC05" d="m242.832 82.636 4.716-1.663-1.177-3.337h-3.539v5Zm58.296 165.299-4.716 1.663 1.177 3.337h3.539v-5Zm2.301 0v5h3.538l1.177-3.337-4.715-1.663Zm58.295-165.299v-5h-3.538l-1.177 3.337 4.715 1.663Zm24.929 0 4.694 1.724 2.469-6.724h-7.163v5ZM314.551 279v5h3.491l1.203-3.277-4.694-1.723Zm-24.545 0-4.694 1.723 1.203 3.277h3.491v-5ZM217.903 82.636v-5h-7.162l2.469 6.724 4.693-1.724Zm20.214 1.663 58.295 165.299 9.431-3.326-58.295-165.299-9.431 3.326Zm63.011 168.636h2.301v-10h-2.301v10Zm7.016-3.337L366.44 84.299l-9.431-3.326-58.295 165.299 9.43 3.326Zm53.58-161.962h24.929v-10h-24.929v10Zm20.236-6.723-72.102 196.364 9.387 3.446L391.347 84.36l-9.387-3.447ZM314.551 274h-24.545v10h24.545v-10Zm-19.852 3.277L222.597 80.913l-9.387 3.447 72.102 196.363 9.387-3.446Zm-76.796-189.64h24.929v-10h-24.929v10Z"/>
                </g>
                <defs>
                  <clipPath id="a">
                    <path fill="#fff" d="M0 0h400v345H0z"/>
                  </clipPath>
                </defs>
              </svg>
              </div>
            </div>
            </div>
          </div>
          {searchOnType.length != 0 &&<div className={styles['search-results']}>
            <div className={styles["border-search"]}></div>
            <ul className={styles["list-container"]}>
                <li className={styles["list-item"]}>
                    <div className={styles['item-container']}>
                        <div className={styles['item-icon-container']}>
                            <span className={"material-symbols-outlined"}>search</span>
                        </div>
                    </div>
                    <div className={styles['search-text']}>
                        <span className={styles[""]}><b>Sikand Sandhu</b></span>
                    </div>
                </li>
            </ul>
          </div>}
          
        </div>
        
      </div>
      { true&&<div ref={cursorRef} className={styles["cursor-move"]}>
      <Image
          src="/cursor.png"
          alt='Curspr'
          width={20}
          height={20}
      />
  </div>}
  </>
  )
}
